[toc]

> **查询**

```java
@Autowired
private UserMapper userMapper;

@Test
public void testSelectList(){
    // 查询所有数据
    List<User> list = userMapper.selectList(null);
    list.forEach(System.out::println);
}
```



> **添加**

```java
@Test
public void testInsert(){
    User user = new User();
    user.setName("张三");
    user.setAge(20);
    user.setEmail("zhangsan@qq.com");
    int result = userMapper.insert(user);
    System.out.println("result:" + result);
    // 自动获取id:雪花算法算出来的id
    System.out.println("id:" + user.getId());
}
```

![image-20240827144727088](https://cdn.jsdelivr.net/gh/lqyspace/AI-master-img@master/img/202408271447128.png)



> **删除**

1、通过id删除用户信息

```java
@Test
public void testDelete(){
    int result = userMapper.deleteById(1);
    System.out.println("result:" + result);
}
```

![image-20240827145104252](https://cdn.jsdelivr.net/gh/lqyspace/AI-master-img@master/img/202408271451289.png)

2、根据map集合中所设置的条件删除用户信息

```java
@Test
public void testDelete(){
//        int result = userMapper.deleteById(1);
//        System.out.println("result:" + result);
    Map<String, Object> map = new HashMap<>();
    map.put("name", "zhangsan");
    map.put("age", 20);
    int result = userMapper.deleteByMap(map);
    System.out.println("result:" + result);
}
```

![image-20240827145447161](https://cdn.jsdelivr.net/gh/lqyspace/AI-master-img@master/img/202408271454196.png)

3、通过多个id实现批量删除

```java
@Test
public void testDelete(){
//        int result = userMapper.deleteById(1);
//        System.out.println("result:" + result);
//        Map<String, Object> map = new HashMap<>();
//        map.put("name", "zhangsan");
//        map.put("age", 20);
//        int result = userMapper.deleteByMap(map);
//        System.out.println("result:" + result);
    List<Long> ids = Arrays.asList(1l, 2l, 3l);
    int result = userMapper.deleteBatchIds(ids);
    System.out.println("result:" + result);
}
```

![image-20240827145814330](https://cdn.jsdelivr.net/gh/lqyspace/AI-master-img@master/img/202408271458371.png)



> **修改**

修改指定内容，对没有提到的字段不进行修改，并保持原值

```java
@Test
public void testUpdate(){
    User user = new User();
    user.setId(4l);
    user.setAge(25);
    user.setEmail("lisi@qq.com");
    int result = userMapper.updateById(user);
    System.out.println("result:" + result);
}
```

![image-20240827150302921](https://cdn.jsdelivr.net/gh/lqyspace/AI-master-img@master/img/202408271503954.png)



> **查询**

```java
@Test
public void testSelect(){
    // 通过id查询用户信息
    // select id, name, age, email from user where id=?
    User user = userMapper.selectById(4l);
    System.out.println(user);
}
```

![image-20240827150845189](https://cdn.jsdelivr.net/gh/lqyspace/AI-master-img@master/img/202408271508240.png)

```java
@Test
public void testSelect(){
    // 通过id查询用户信息
    // select id, name, age, email from user where id=?
//        User user = userMapper.selectById(4l);
//        System.out.println(user);
    // 根据List<?>批量查询
//        SELECT id,name,age,email FROM user WHERE id IN ( ? , ? , ? )
    List<Long> ids = Arrays.asList(4l, 5l, 3l);
    List<User> list = userMapper.selectBatchIds(ids);
    list.forEach(System.out::println);
}
```

![image-20240827151225750](https://cdn.jsdelivr.net/gh/lqyspace/AI-master-img@master/img/202408271512799.png)

```java
@Test
public void testSelect(){
    // 通过id查询用户信息
    // select id, name, age, email from user where id=?
//        User user = userMapper.selectById(4l);
//        System.out.println(user);
    // 根据List<?>批量查询
//        SELECT id,name,age,email FROM user WHERE id IN ( ? , ? , ? )
//        List<Long> ids = Arrays.asList(4l, 5l, 3l);
//        List<User> list = userMapper.selectBatchIds(ids);
//        list.forEach(System.out::println);

    // 根据map中所设置的条件查询用户信息
    Map<String, Object> map = new HashMap<>();
    map.put("name", "jack");
    map.put("age", 22);
    List<User> list = userMapper.selectByMap(map);
    list.forEach(System.out::println);
}
```

![image-20240827151611965](https://cdn.jsdelivr.net/gh/lqyspace/AI-master-img@master/img/202408271516010.png)



> **如果BaseMapper中的功能不能满足当前的业务需要，可以自己进行映射**

- 首先，默认的mapper的配置文件的位置：resources/mapper；如果想自定义，可以添加配置mapper-locations：

  ```yml
  mybatis-plus:
    configuration:
      log-impl: org.apache.ibatis.logging.stdout.StdOutImpl
  #  mapper-locations:
  ```




> **自定义sql语句**

在resources/mapper文件夹里添加UserMapper.xml文件，然后添加映射语句：

```xml
<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.lqy.mybatisplus.mapper.UserMapper">
<!--    Map<String, Object> selectMapById(Long id);-->
    <select id="selectMapById" resultType="map">
        select id, name, age, email from user where id=#{id}
    </select>

</mapper>
```

```java
@Test
public void selectMapById(){
    Map<String, Object> stringObjectMap = userMapper.selectMapById(4l);
    System.out.println(stringObjectMap);
}
```

```java
public interface UserMapper extends BaseMapper<User> {
    /**
     * 根据id查询用户信息为map集合
     * @param id
     * @return
     */
    @MapKey("id")
    Map<String, Object> selectMapById(Long id);
}
```

![image-20240830092943036](https://cdn.jsdelivr.net/gh/lqyspace/AI-master-img@master/img/202408300953592.png)