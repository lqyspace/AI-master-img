[toc]

> **步骤**

- 创建springboot项目

- 引入依赖：

  ```yml
  <!--mybatis-plus启动器-->
  <dependency>
      <groupId>com.baomidou</groupId>
      <artifactId>mybatis-plus-boot-starter</artifactId>
      <version>3.5.7</version>
  </dependency>
  
  <!--lombok用于简化实体类开发-->
  <dependency>
      <groupId>org.projectlombok</groupId>
      <artifactId>lombok</artifactId>
      <optional>true</optional>
  </dependency>
  
  <!--数据库驱动-->
  <dependency>
      <groupId>mysql</groupId>
      <artifactId>mysql-connector-java</artifactId>
      <scope>runtime</scope>
  </dependency>
  ```

- 配置application.yml

  ```yml
  # DataSource Config
  spring:
    # 配置数据源信息
    datasource:
      # 配置连接数据库的各个信息
      driver-class-name: com.mysql.cj.jdbc.Driver
      username: root
      password: admin
      # 配置数据源类型
      type: com.zaxxer.hikari.HikariDataSource
      url: jdbc:mysql://localhost:3306/my_mybatis_plus?characterEncoding=utf-8&useSSL=false
  ```

  **注意：**

  - 1、驱动类driver-class-name

    - springboot2.0（内置jdbc5.0驱动），驱动类使用：

      driver-class-name：**com.mysql.jdbc.Driver**

    - springboot2.1及以上（内置jdbc8驱动），驱动类使用：

      driver-class-name: **com.mysql.cj.jdbc.Driver**

    - 否则运行测试用例的时候会有WARN信息

  -  连接地址url

    - Mysql5.7版本的url：

      ```yml
      jdbc:mysql://localhost:3306/my_mybatis_plus?characterEncoding=utf-8&useSSL=false
      ```

    - Mysql8.0版本的url：

      ```yml
      jdbc:mysql://localhost:3306/my_mybatis_plus?serverTimezone=GMT%2B8&characterEncoding=utf-8&useSSL=false
      ```

    - 否则运行测试用例报告如下的错误：

      ```java
      java.sql.SQLException: The server time zone value xxxxx is unrecognized or represents more.
      ```

- 简单使用

  ```java
  @Data
  //@NoArgsConstructor
  //@AllArgsConstructor
  //@EqualsAndHashCode
  //@Getter
  //@Setter
  public class User {
      private Long id;
      private String name;
      private Integer age;
      private String email;
  }
  ```

  @Data的功能就相当于引用下面的五项的功能：无参构造、有参构造、重写哈希和equal、以及getter和setter

- 添加mapper

  创建一个接口：UserMapper，并继承BaseMapper<User>

  ```java
  package com.lqy.mybatisplus.mapper;
  
  import com.baomidou.mybatisplus.core.mapper.BaseMapper;
  import com.lqy.mybatisplus.pojo.User;
  
  /**
   * @ClassName: UserMapper
   * @Description:
   * @Author: lengqy
   * @Date: 2024/8/27 14:13
   **/
  public interface UserMapper extends BaseMapper<User> {
  }
  ```

  在启动类上添加扫描mapper：

  ```java
  @SpringBootApplication
  // 扫描mapper接口所在的包
  @MapperScan("com.lqy.mybatisplus.mapper")
  public class MybatisPlusLearningApplication {
  
      public static void main(String[] args) {
          SpringApplication.run(MybatisPlusLearningApplication.class, args);
      }
  
  }
  ```

  添加测试用例：

  ```java
  package com.lqy.mybatisplus;
  
  import com.lqy.mybatisplus.mapper.UserMapper;
  import com.lqy.mybatisplus.pojo.User;
  import org.junit.jupiter.api.Test;
  import org.springframework.beans.factory.annotation.Autowired;
  import org.springframework.boot.test.context.SpringBootTest;
  
  import java.util.List;
  
  /**
   * @ClassName: MyBatisPlusTest
   * @Description:
   * @Author: lengqy
   * @Date: 2024/8/27 14:17
   **/
  @SpringBootTest
  public class MyBatisPlusTest {
      @Autowired
      private UserMapper userMapper;
      // 如果这个地方爆红，可以在接口UserMapper上加一个注解@Repository，表明它是一个持久层组件
  
      @Test
      public void testSelectList(){
          List<User> list = userMapper.selectList(null);
          list.forEach(System.out::println);
      }
  }
  ```

  运行以上的代码可以输出：

  ![image-20240827142735937](https://gcore.jsdelivr.net/gh/lqyspace/AI-master-img@master/img/202408271427000.png)

- 如果想要在控制台输出sql语句，可以在配置文件里面添加如下：

  ```yml
  mybatis-plus:
    configuration:
      log-impl: org.apache.ibatis.logging.stdout.StdOutImpl
  ```

  ![image-20240827143201183](https://gcore.jsdelivr.net/gh/lqyspace/AI-master-img@master/img/202408271432245.png)
